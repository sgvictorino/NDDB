<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Nddb by nodeGame</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Nddb</h1>
        <p>Javascript lightweight N-dimensional database</p>
        <p class="view"><a href="https://github.com/nodeGame/NDDB">View the Project on GitHub <small>nodeGame/NDDB</small></a></p>
        <ul>
          <li><a href="https://github.com/nodeGame/NDDB/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/nodeGame/NDDB/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/nodeGame/NDDB">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="nddb" class="anchor" href="#nddb" aria-hidden="true"><span class="octicon octicon-link"></span></a>NDDB</h1>

<p><a href="https://travis-ci.org/nodeGame/NDDB"><img src="https://travis-ci.org/nodeGame/NDDB.png?branch=master" alt="Build Status"></a></p>

<p>NDDB is a powerful and versatile object database for node.js and the browser.</p>

<hr>

<p>NDDB (N-Dimensional DataBase) supports indexes, views, hashes, joins,
group-by, basic statistics, custom operations, saving and loading from
file system and browser localStorage, and much more.</p>

<p>Developer-friendly thanks to an easy api, detailed documentation, and
<strong>100%</strong> test coverage.</p>

<h2>
<a id="list-of-features" class="anchor" href="#list-of-features" aria-hidden="true"><span class="octicon octicon-link"></span></a>List of features</h2>

<ul>
<li>Selecting: <code>select</code>, <code>and</code>, <code>or</code>
</li>
<li>Sorting: <code>sort</code>, <code>reverse</code>, <code>last</code>, <code>first</code>, <code>limit</code>, <code>distinct</code>,
<code>shuffle</code>
</li>
<li>Indexing: <code>view</code>, <code>index</code>, <code>hash</code>, <code>comparator</code>
</li>
<li>Custom callbacks: <code>map</code>, <code>each</code>, <code>filter</code>
</li>
<li>Updating and Deletion: <code>update</code>, <code>remove</code>, <code>clear</code>
</li>
<li>Advanced operations: <code>split</code>, <code>join</code>, <code>concat</code>, <code>groupBy</code>
</li>
<li>Fetching and transformations: <code>fetch</code>, <code>fetchArray</code>,
<code>fetchKeyArray</code>, <code>fetchValues</code>, <code>fetchSubObj</code>
</li>
<li>Statistics operator: <code>count</code>, <code>max</code>, <code>min</code>, <code>mean</code>, <code>stddev</code>
</li>
<li>Diff: <code>diff</code>, <code>intersect</code>
</li>
<li>Skim: <code>skim</code>, <code>keep</code>
</li>
<li>Iterator: <code>previous</code>, <code>next</code>, <code>first</code>, <code>last</code>
</li>
<li>Tagging: <code>tag</code>
</li>
<li>Event listener / emitter: <code>on</code>, <code>off</code>, <code>emit</code>
</li>
<li>Saving and Loading: <code>save</code>, <code>load</code>, <code>loadCSV</code>
</li>
</ul>

<p>The complete NDDB api documentation is available
<a href="http://nodegame.github.com/NDDB/docs/nddb.js.html">here</a>.</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Load the library in Node.js:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> NDDB <span class="pl-k">=</span> <span class="pl-s3">require</span>(<span class="pl-s1"><span class="pl-pds">'</span>NDDB<span class="pl-pds">'</span></span>).NDDB;</pre></div>

<p>or in the browser add a script tag in the page:</p>

<div class="highlight highlight-html"><pre><span class="pl-c">&lt;!-- Must load a version of NDDB that includes JSUS (see 'build/' dir) --&gt;</span>
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>/path/to/nddb.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<p>Create an instance of NDDB:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> db <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">NDDB</span>();</pre></div>

<p>Insert an item into the database:</p>

<div class="highlight highlight-javascript"><pre>db.insert({
    painter<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Picasso<span class="pl-pds">"</span></span>,
    title<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Les Demoiselles d'Avignon<span class="pl-pds">"</span></span>,
    year<span class="pl-k">:</span> <span class="pl-c1">1907</span>
});</pre></div>

<p>Import a collection of items:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> items <span class="pl-k">=</span> [
    {
        painter<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Dali<span class="pl-pds">"</span></span>,
        title<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Portrait of Paul Eluard<span class="pl-pds">"</span></span>,
        year<span class="pl-k">:</span> <span class="pl-c1">1929</span>,
        portrait<span class="pl-k">:</span> <span class="pl-c1">true</span>
    },
    {
        painter<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Dali<span class="pl-pds">"</span></span>,
        title<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Barcelonese Mannequin<span class="pl-pds">"</span></span>,
        year<span class="pl-k">:</span> <span class="pl-c1">1927</span>
    },
    {
        painter<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Monet<span class="pl-pds">"</span></span>,
        title<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Water Lilies<span class="pl-pds">"</span></span>,
        year<span class="pl-k">:</span> <span class="pl-c1">1906</span>
    },
    {
        painter<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Monet<span class="pl-pds">"</span></span>,
        title<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Wheatstacks (End of Summer)<span class="pl-pds">"</span></span>,
        year<span class="pl-k">:</span> <span class="pl-c1">1891</span>
    },
    {
        painter<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Manet<span class="pl-pds">"</span></span>,
        title<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Olympia<span class="pl-pds">"</span></span>,
        year<span class="pl-k">:</span> <span class="pl-c1">1863</span>
    }
];

db.importDB(items);</pre></div>

<p>Retrieve the database size:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> db_size <span class="pl-k">=</span> db.<span class="pl-sc">size</span>(); <span class="pl-c">// 6</span></pre></div>

<h3>
<a id="select-items" class="anchor" href="#select-items" aria-hidden="true"><span class="octicon octicon-link"></span></a>Select Items</h3>

<p>Select statements must begin with <code>select</code>, and can be concatened by
any number of subsequent <code>and</code> and <code>or</code> statements. The comparison in
select statements is performed using three input parameters: </p>

<ul>
<li>'property'</li>
<li>'operator'</li>
<li>any additional number of arguments required by operator</li>
</ul>

<p>Available operators include standard logical operators:</p>

<ul>
<li>
<code>=</code>, <code>==</code>, <code>!=</code>, `<code>&gt;</code>, &gt;=<code>,</code>&lt;<code>,</code>&lt;=`,</li>
</ul>

<p>or advanced comparison operators:</p>

<ul>
<li>
<code>E</code>: field exists (can be omitted, it is the default one)</li>
<li>
<code>&gt;&lt;</code>: between values (expects array)</li>
<li>
<code>&lt;&gt;</code>: not between values (expects array)</li>
<li>
<code>in</code>: element is found in array (expects array)</li>
<li>
<code>!in</code>: element is noi found in array (expects array)</li>
<li>
<code>LIKE</code>: string SQL LIKE (case sensitive)</li>
<li>
<code>iLIKE</code>: string SQL LIKE (case insensitive)</li>
</ul>

<p>It is possible to access and compare nested properties simply
separating them with <code>.</code>.</p>

<p>After a selection is finished, items can be returned using one of the
<code>fetch</code> statements.</p>

<h4>
<a id="select-examples" class="anchor" href="#select-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Select Examples</h4>

<p>Select all paintings from Dali:</p>

<div class="highlight highlight-javascript"><pre>db.<span class="pl-s3">select</span>(<span class="pl-s1"><span class="pl-pds">'</span>painter<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>=<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>Dali<span class="pl-pds">'</span></span>); <span class="pl-c">// 2 items</span></pre></div>

<p>Case sensitive <code>LIKE</code> operator:</p>

<div class="highlight highlight-javascript"><pre>db.<span class="pl-s3">select</span>(<span class="pl-s1"><span class="pl-pds">'</span>painter<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>LIKE<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>M_net<span class="pl-pds">'</span></span>); <span class="pl-c">// 3 items</span></pre></div>

<p>Select on multiple properties (<code>*</code>) with case insensitive <code>LIKE</code>:</p>

<div class="highlight highlight-javascript"><pre>db.<span class="pl-s3">select</span>(<span class="pl-s1"><span class="pl-pds">'</span>*<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>iLIKE<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>%e%<span class="pl-pds">'</span></span>); <span class="pl-c">// All items</span>
db.<span class="pl-s3">select</span>([<span class="pl-s1"><span class="pl-pds">'</span>painter<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>portrait<span class="pl-pds">'</span></span>], <span class="pl-s1"><span class="pl-pds">'</span>iLIKE<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>%e%<span class="pl-pds">'</span></span>) <span class="pl-c">// 5 items</span></pre></div>

<p>Select all portraits:</p>

<div class="highlight highlight-javascript"><pre>db.<span class="pl-s3">select</span>(<span class="pl-s1"><span class="pl-pds">'</span>portrait<span class="pl-pds">'</span></span>); <span class="pl-c">// 1 item</span></pre></div>

<p>Fetch all paintings from Dali that are before 1928:</p>

<div class="highlight highlight-javascript"><pre>db.<span class="pl-s3">select</span>(<span class="pl-s1"><span class="pl-pds">'</span>painter<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>=<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>Dali<span class="pl-pds">'</span></span>)
  .and(<span class="pl-s1"><span class="pl-pds">'</span>year<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>&lt;<span class="pl-pds">'</span></span>, <span class="pl-c1">1928</span>);
  .fetch(); <span class="pl-c">// 1 item</span></pre></div>

<p>Fetch all paintings of the beginning of XX's century:</p>

<div class="highlight highlight-javascript"><pre>    db.<span class="pl-s3">select</span>(<span class="pl-s1"><span class="pl-pds">'</span>year<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>&gt;&lt;<span class="pl-pds">'</span></span>, [<span class="pl-c1">1900</span>, <span class="pl-c1">1910</span>])
      .fetch(); <span class="pl-c">// 2 items</span></pre></div>

<p>Fetch separately all the painters and all the dates of the paintings:</p>

<div class="highlight highlight-javascript"><pre>db.<span class="pl-s3">select</span>(<span class="pl-s1"><span class="pl-pds">'</span>year<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>&gt;&lt;<span class="pl-pds">'</span></span>, [<span class="pl-c1">1900</span>, <span class="pl-c1">1910</span>])
  .fetchValues([<span class="pl-s1"><span class="pl-pds">'</span>painter<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>title<span class="pl-pds">'</span></span>]);

<span class="pl-c">// { painter: [ 'Jesus', 'Dali', 'Dali', 'Monet', 'Monet', 'Manet' ],</span>
<span class="pl-c">//   year: [ 0, 1929, 1927, 1906, 1891, 1863 ] }</span></pre></div>

<h3>
<a id="sorting" class="anchor" href="#sorting" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sorting</h3>

<p>Define a global comparator function that sorts all the entries chronologically:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-s3">db</span>.<span class="pl-en">globalCompator</span> <span class="pl-k">=</span> <span class="pl-st">function</span> (<span class="pl-vpf">o1</span>, <span class="pl-vpf">o2</span>) {
    <span class="pl-k">if</span> (o1.year <span class="pl-k">&lt;</span> o2.year) <span class="pl-k">return</span> <span class="pl-c1">1</span>;
    <span class="pl-k">if</span> (o1.year <span class="pl-k">&lt;</span> o2.year) <span class="pl-k">return</span> <span class="pl-c1">2</span>;
    <span class="pl-k">return</span> <span class="pl-c1">0</span>;
};</pre></div>

<p>Sort all the items (global comparator function is automatically used):</p>

<div class="highlight highlight-javascript"><pre>db.<span class="pl-s3">sort</span>(); <span class="pl-c">// Order: Manet, Monet, Monet, Picasso, Dali, Dali</span></pre></div>

<p>Reverse the order of the items:</p>

<div class="highlight highlight-javascript"><pre>db.<span class="pl-s3">reverse</span>(); <span class="pl-c">// Order: Dali, Dali, Picasso, Monet, Monet, Manet</span></pre></div>

<p>Define a custom comparator function for the name of the painter, which
gives highest priorities to the canvases of Picasso;</p>

<div class="highlight highlight-javascript"><pre>db.compare(<span class="pl-s1"><span class="pl-pds">'</span>painter<span class="pl-pds">'</span></span>, <span class="pl-st">function</span> (<span class="pl-vpf">o1</span>, <span class="pl-vpf">o2</span>) {
    <span class="pl-k">if</span> (o1.painter <span class="pl-k">===</span> <span class="pl-s1"><span class="pl-pds">'</span>Picasso<span class="pl-pds">'</span></span>) <span class="pl-k">return</span> <span class="pl-k">-</span><span class="pl-c1">1</span>;
    <span class="pl-k">if</span> (o2.painter <span class="pl-k">===</span> <span class="pl-s1"><span class="pl-pds">'</span>Picasso<span class="pl-pds">'</span></span>) <span class="pl-k">return</span> <span class="pl-c1">1</span>;
}</pre></div>

<p>Sort all the paintings by painter</p>

<div class="highlight highlight-javascript"><pre>db.<span class="pl-s3">sort</span>(<span class="pl-s1"><span class="pl-pds">'</span>painter<span class="pl-pds">'</span></span>); <span class="pl-c">// Picasso is always listed first</span></pre></div>

<h3>
<a id="views" class="anchor" href="#views" aria-hidden="true"><span class="octicon octicon-link"></span></a>Views</h3>

<p>Splits the database in sub-database, each containing semantically
consistent set of entries:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">// Let us add some cars to our previous database of paintings.</span>
<span class="pl-s">var</span> not_art_items <span class="pl-k">=</span> [
    {
      car<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Ferrari<span class="pl-pds">"</span></span>,
      model<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>F10<span class="pl-pds">"</span></span>,
      speed<span class="pl-k">:</span> <span class="pl-c1">350</span>,
    },
    {
      car<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Fiat<span class="pl-pds">"</span></span>,
      model<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>500<span class="pl-pds">"</span></span>,
      speed<span class="pl-k">:</span> <span class="pl-c1">100</span>,
    },
    {
      car<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>BMW<span class="pl-pds">"</span></span>,
      model<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Z4<span class="pl-pds">"</span></span>,
      speed<span class="pl-k">:</span> <span class="pl-c1">250</span>,
    },
];

db.view(<span class="pl-s1"><span class="pl-pds">'</span>art<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">o</span>) {
  <span class="pl-k">return</span> o.painter;
});

db.view(<span class="pl-s1"><span class="pl-pds">'</span>cars<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">o</span>) {
  <span class="pl-k">return</span> o.car;
});

db.rebuildIndexes();

db.<span class="pl-sc">size</span>();          <span class="pl-c">// 9</span>
db.art.<span class="pl-sc">size</span>();      <span class="pl-c">// NDDB with 6 art entries</span>
db.cars.<span class="pl-sc">size</span>();     <span class="pl-c">// NDDB with 3 car entries</span></pre></div>

<h3>
<a id="hashing" class="anchor" href="#hashing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hashing</h3>

<p>Define a custom hash function that creates a new view on each of the
painters in the database:</p>

<div class="highlight highlight-javascript"><pre>db.<span class="pl-sc">hash</span>(<span class="pl-s1"><span class="pl-pds">'</span>painter<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">o</span>) {
    <span class="pl-k">if</span> (<span class="pl-k">!</span>o) <span class="pl-k">return</span> <span class="pl-c1">undefined</span>;
    <span class="pl-k">return</span> o.painter;
});

db.rebuildIndexes();

db.<span class="pl-sc">size</span>();          <span class="pl-c">// 6, unchanged;</span>
db.painter.Picasso; <span class="pl-c">// NDDB with 1 element in db</span>
db.painter.Monet    <span class="pl-c">// NDDB with 2 elements in db</span>
db.painter.Manet    <span class="pl-c">// NDDB with 1 elements in db</span>
db.painter.Dali     <span class="pl-c">// NDDB with 2 elements in db</span></pre></div>

<h3>
<a id="listenting-to-events" class="anchor" href="#listenting-to-events" aria-hidden="true"><span class="octicon octicon-link"></span></a>Listenting to events</h3>

<p>Listen to the <code>insert</code> event and modify the inserted items by adding
an external index to them:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> id <span class="pl-k">=</span> <span class="pl-c1">0</span>;
<span class="pl-st">function</span> <span class="pl-en">getMyId</span>(){ <span class="pl-k">return</span> id<span class="pl-k">++</span>; };

db.on(<span class="pl-s1"><span class="pl-pds">'</span>insert<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">o</span>) {
    o.painter.<span class="pl-sc">id</span> <span class="pl-k">=</span> getMyId();
});</pre></div>

<h3>
<a id="indexes" class="anchor" href="#indexes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Indexes</h3>

<p>Define a custom indexing function that gives fast, direct access to
the items of the database;</p>

<div class="highlight highlight-javascript"><pre>db.<span class="pl-sc">index</span>(<span class="pl-s1"><span class="pl-pds">'</span>pid<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">o</span>) {
    <span class="pl-k">return</span> o.<span class="pl-sc">id</span>;
});

db.rebuildIndexes();

db.pid.get(<span class="pl-c1">0</span>).<span class="pl-sc">name</span>; <span class="pl-c">// Picasso</span>

db.pid.update(<span class="pl-c1">0</span>, {
  comment<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Good job Pablo!<span class="pl-pds">"</span></span>
});

<span class="pl-c">// Counts items in selection.</span>
db.<span class="pl-s3">select</span>(<span class="pl-s1"><span class="pl-pds">'</span>comment<span class="pl-pds">'</span></span>).count(); <span class="pl-c">// 1</span>

<span class="pl-s">var</span> picasso <span class="pl-k">=</span> db.pid.<span class="pl-s3">remove</span>(<span class="pl-c1">0</span>);
db.<span class="pl-sc">size</span>(); <span class="pl-c">// (0)</span>

<span class="pl-c">// Get all available keys in the index</span>
db.painter.getAllKeys(); <span class="pl-c">// ['0','1', ... ]</span>

<span class="pl-c">// Get all elements indexed by their key in one object</span>
db.painter.getAllKeyElements();</pre></div>

<h2>
<a id="example-of-a-configuration-object" class="anchor" href="#example-of-a-configuration-object" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example of a configuration object</h2>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> <span class="pl-en">logFunc</span> <span class="pl-k">=</span> <span class="pl-st">function</span>(<span class="pl-vpf">txt</span>, <span class="pl-vpf">level</span>) {
  <span class="pl-k">if</span> (level <span class="pl-k">&gt;</span> <span class="pl-c1">0</span>) {
    <span class="pl-en">console</span><span class="pl-s3">.log</span>(txt);
  }
};

<span class="pl-s">var</span> options <span class="pl-k">=</span> {
  tags<span class="pl-k">:</span>  {},          <span class="pl-c">// Collection of tags</span>
  update<span class="pl-k">:</span> {           <span class="pl-c">// On every insert, remove and update:</span>
    indexes<span class="pl-k">:</span>  <span class="pl-c1">true</span>,   <span class="pl-c">// Updates the indexes, if any</span>
    sort<span class="pl-k">:</span>     <span class="pl-c1">true</span>,   <span class="pl-c">// Sorts the items of the database</span>
    pointer<span class="pl-k">:</span>  <span class="pl-c1">true</span>,   <span class="pl-c">// Moves the iterator to the last inserted element</span>
  },
  C<span class="pl-k">:</span>  {},             <span class="pl-c">// Collection of comparator functions</span>
  H<span class="pl-k">:</span>  {},             <span class="pl-c">// Collection of hashing functions</span>
  I<span class="pl-k">:</span>  {},             <span class="pl-c">// Collection of indexing functions</span>
  V<span class="pl-k">:</span>  {},             <span class="pl-c">// Collection of view functions</span>
  log<span class="pl-k">:</span> logFunc,       <span class="pl-c">// Default stdout</span>
  logCtx<span class="pl-k">:</span> logCtx      <span class="pl-c">// The context of execution for the log function</span>
  nddb_pointer<span class="pl-k">:</span> <span class="pl-c1">4</span>,    <span class="pl-c">// Set the pointer to element of index 4</span>
  <span class="pl-en">globalCompare</span>: <span class="pl-st">function</span>(<span class="pl-vpf">o1</span>, <span class="pl-vpf">o2</span>) {
    <span class="pl-c">// comparing code</span>
  },
  filters<span class="pl-k">:</span> {          <span class="pl-c">// Extends NDDB with new operators for select queries</span>
    <span class="pl-s1"><span class="pl-pds">'</span><span class="pl-en">%</span><span class="pl-pds">'</span></span>: <span class="pl-st">function</span>(<span class="pl-vpf">d</span>, <span class="pl-vpf">value</span>, <span class="pl-vpf">comparator</span>){
          <span class="pl-k">return</span> <span class="pl-st">function</span>(<span class="pl-vpf">elem</span>) {
            <span class="pl-k">if</span> ((elem[d] <span class="pl-k">%</span> value) <span class="pl-k">===</span> <span class="pl-c1">0</span>) {
              <span class="pl-k">return</span> elem;
            }
          }
  },
  share<span class="pl-k">:</span> {           <span class="pl-c">// Contains objects that are copied by reference to</span>
                     <span class="pl-c">// in every new instance of NDDB.</span>
    sharedObj<span class="pl-k">:</span> sharedObj
  }
}

<span class="pl-s">var</span> nddb <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">NDDB</span>(options);

<span class="pl-c">// or</span>

nddb <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">NDDB</span>();
nddb.init(options);</pre></div>

<h2>
<a id="save-and-load-from-file-or-to-localstorage" class="anchor" href="#save-and-load-from-file-or-to-localstorage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Save and load from file or to localStorage</h2>

<p>In the node.js environment, it is possible to save the state of the
database to a file and load it afterwards.</p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">// Database exists and items inserted.</span>
db.save(<span class="pl-s1"><span class="pl-pds">'</span>./db.out<span class="pl-pds">'</span></span>);

<span class="pl-s">var</span> db2 <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">NDDB</span>();
db2.<span class="pl-s3">load</span>(<span class="pl-s1"><span class="pl-pds">'</span>./db.out<span class="pl-pds">'</span></span>);</pre></div>

<p>The above command are valid also in the browser environment if
<a href="https://github.com/shakty/shelf.js">Shelf.js</a> is loaded. A string id
instead of the path to a file must be given instead.</p>

<h2>
<a id="test" class="anchor" href="#test" aria-hidden="true"><span class="octicon octicon-link"></span></a>Test</h2>

<p>NDDB relies on <a href="http://visionmedia.github.com/mocha/">mocha</a> and
<a href="http://github.com/visionmedia/should.js">should.js</a> for testing.</p>

<pre><code>$ npm install # will load all necessary dependencies
$ npm test # will run the test suite against nddb.js
</code></pre>

<h2>
<a id="build" class="anchor" href="#build" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build</h2>

<p>Create your customized build of NDDB using the make file in the <code>bin</code>
directory:</p>

<p>In order to run in the browser NDDB needs to have
<a href="http://github.com/nodeGame/JSUS">JSUS</a> loaded. You can include it
separately, or create a new build that includes it already. See the
build help for options.</p>

<div class="highlight highlight-javascript"><pre>node make.nddb.js build <span class="pl-c">// Standard build,</span>
node make.nddb.js build <span class="pl-k">-</span>a <span class="pl-k">-</span>o nddb<span class="pl-k">-</span>full <span class="pl-c">// Full build</span></pre></div>

<p>The build file file will be created inside the <code>build/</code> directory.</p>

<h3>
<a id="help" class="anchor" href="#help" aria-hidden="true"><span class="octicon octicon-link"></span></a>Help</h3>

<div class="highlight highlight-javascript"><pre>node make.nddb.js <span class="pl-k">--</span>help</pre></div>

<h2>
<a id="api-documentation" class="anchor" href="#api-documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>API Documentation</h2>

<p>Create html API documentation using the make file in the bin directory:</p>

<div class="highlight highlight-javascript"><pre>node make.nddb.js doc</pre></div>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>Copyright (C) 2014 Stefano Balietti</p>

<p>Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:</p>

<p>The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/nodeGame">nodeGame</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-34089835-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>